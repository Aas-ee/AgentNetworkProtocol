<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- 标题 -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold">ANP 智能体点对点交易系统架构</text>
  
  <!-- ANP协议环境 - 外部容器 -->
  <rect x="50" y="70" width="800" height="580" rx="20" ry="20" fill="#e6f3ff" stroke="#2980b9" stroke-width="2" stroke-dasharray="5,5" />
  <text x="450" y="95" font-family="Arial, sans-serif" font-size="18" text-anchor="middle" fill="#2980b9">Agent Network Protocol (ANP) 协议环境</text>
  
  <!-- 用户端 -->
  <rect x="100" y="130" width="180" height="190" rx="10" ry="10" fill="#d5e8d4" stroke="#82b366" stroke-width="2" />
  <text x="190" y="155" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">用户端</text>
  
  <!-- 用户 -->
  <rect x="120" y="170" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#82b366" stroke-width="2" />
  <text x="190" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">用户 (User)</text>
  
  <!-- 用户智能体 -->
  <rect x="120" y="240" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#82b366" stroke-width="2" />
  <text x="190" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">用户智能体</text>
  <text x="190" y="280" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(User Agent)</text>
  
  <!-- 酒店端 -->
  <rect x="620" y="130" width="180" height="190" rx="10" ry="10" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="155" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">酒店端</text>
  
  <!-- 酒店 -->
  <rect x="640" y="170" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="200" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">酒店 (Hotel)</text>
  
  <!-- 酒店智能体 -->
  <rect x="640" y="240" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#6c8ebf" stroke-width="2" />
  <text x="710" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">酒店智能体</text>
  <text x="710" y="280" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Hotel Agent)</text>
  
  <!-- 支付部分 -->
  <rect x="360" y="370" width="180" height="190" rx="10" ry="10" fill="#ffe6cc" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="395" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">支付系统</text>
  
  <!-- 支付基础设施 -->
  <rect x="380" y="410" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="440" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">支付基础设施</text>
  <text x="450" y="455" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(Payment Infrastructure)</text>
  
  <!-- 支付智能体 -->
  <rect x="380" y="480" width="140" height="60" rx="8" ry="8" fill="#ffffff" stroke="#d79b00" stroke-width="2" />
  <text x="450" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">支付智能体</text>
  <text x="450" y="525" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Payment Agent)</text>
  
  <!-- 仲裁智能体 (可选) -->
  <rect x="100" y="440" width="140" height="60" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="170" y="465" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">仲裁智能体</text>
  <text x="170" y="485" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Arbitration Agent)</text>
  <text x="170" y="500" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic">可选</text>
  
  <!-- 公证/注册服务 (可选) -->
  <rect x="660" y="440" width="140" height="60" rx="8" ry="8" fill="#f5f5f5" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="730" y="465" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">可信/公证服务</text>
  <text x="730" y="485" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Notary/Registry)</text>
  <text x="730" y="500" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic">可选</text>
  
  <!-- 连接线 -->
  <!-- 用户智能体和酒店智能体 -->
  <path d="M 260 270 L 640 270" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 用户智能体和支付智能体 -->
  <path d="M 190 300 C 190 400 300 510 380 510" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 酒店智能体和支付智能体 -->
  <path d="M 710 300 C 710 400 600 510 520 510" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 用户智能体和仲裁智能体 -->
  <path d="M 170 300 L 170 440" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 酒店智能体和仲裁智能体 -->
  <path d="M 640 270 C 400 270 300 440 240 470" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 酒店智能体和公证/注册服务 -->
  <path d="M 710 300 L 710 440" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 用户智能体和公证/注册服务 -->
  <path d="M 260 270 C 500 270 600 440 660 470" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- 箭头标记定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000" />
    </marker>
  </defs>
  
  <!-- 图例 -->
  <rect x="50" y="600" width="800" height="40" rx="5" ry="5" fill="#f5f5f5" stroke="#666666" stroke-width="1" />
  
  <!-- 实线 -->
  <line x1="100" y1="620" x2="150" y2="620" stroke="#000000" stroke-width="2" />
  <text x="170" y="625" font-family="Arial, sans-serif" font-size="12">必要交互路径</text>
  
  <!-- 虚线 -->
  <line x1="300" y1="620" x2="350" y2="620" stroke="#666666" stroke-width="2" stroke-dasharray="5,3" />
  <text x="370" y="625" font-family="Arial, sans-serif" font-size="12">可选交互路径</text>
  
  <!-- ANP协议标注 -->
  <text x="550" y="625" font-family="Arial, sans-serif" font-size="12" font-style="italic">所有智能体间通信基于 ANP 协议</text>
  
  <!-- 交互逻辑简要说明 -->
  <text x="450" y="570" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">交互逻辑</text>
  <text x="450" y="590" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">智能体间通过可验证凭证(VC)传递与验证，形成凭证链，保证交易可信与完整</text>
</svg>
