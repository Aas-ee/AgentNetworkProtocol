<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
    <!-- 背景 -->
    <rect width="100%" height="100%" fill="#f8f9fa"/>
    
    <!-- 标题 -->
    <text x="400" y="50" text-anchor="middle" font-size="24" font-weight="bold">did:wba 身份验证流程</text>
    
    <!-- 客户端和服务端 -->
    <g transform="translate(100,100)">
        <rect width="200" height="400" fill="#e9ecef" rx="10"/>
        <text x="100" y="50" text-anchor="middle" font-size="20">客户端</text>
    </g>
    <g transform="translate(500,100)">
        <rect width="200" height="400" fill="#e9ecef" rx="10"/>
        <text x="100" y="50" text-anchor="middle" font-size="20">服务端</text>
    </g>
    
    <!-- 步骤1：请求nonce -->
    <g transform="translate(300,150)">
        <line x1="0" y1="0" x2="200" y2="0" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="100" y="-10" text-anchor="middle" font-size="14">1. 请求nonce</text>
    </g>
    
    <!-- 步骤2：返回nonce -->
    <g transform="translate(300,200)">
        <line x1="200" y1="0" x2="0" y2="0" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="100" y="-10" text-anchor="middle" font-size="14">2. 返回nonce</text>
    </g>
    
    <!-- 步骤3：生成签名 -->
    <g transform="translate(150,250)">
        <rect width="100" height="60" fill="#dee2e6" rx="5"/>
        <text x="50" y="35" text-anchor="middle" font-size="12">3. 生成签名:</text>
    </g>
    
    <!-- 步骤4：发送认证请求 -->
    <g transform="translate(300,300)">
        <line x1="0" y1="0" x2="200" y2="0" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="100" y="-10" text-anchor="middle" font-size="14">4. 发送认证请求</text>
    </g>
    
    <!-- 步骤5：验证签名 -->
    <g transform="translate(550,350)">
        <rect width="100" height="60" fill="#dee2e6" rx="5"/>
        <text x="50" y="35" text-anchor="middle" font-size="12">5. 验证签名</text>
    </g>
    
    <!-- 步骤6：返回结果 -->
    <g transform="translate(300,400)">
        <line x1="200" y1="0" x2="0" y2="0" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="100" y="-10" text-anchor="middle" font-size="14">6. 返回结果</text>
    </g>
    
    <!-- 箭头定义 -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#000"/>
        </marker>
    </defs>
</svg>
