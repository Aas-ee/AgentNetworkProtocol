# 关于智能体身份的三个关键问题：互联互通、人类授权、隐私保护

我们基本可以确定，智能体将以前所未有的方式参与到我们的数字生活中，从个人助理到各类专业服务智能体，它们需要一套完善的身份系统来确保智能体之间安全、高效的交互。

本文将深入探讨智能体身份面临的三个关键问题：
- **互联互通**：如何让所有的智能体都能够进行通信与协作，是智能体身份最核心的一个问题。它能够打破数字孤岛，让AI真正的获得完整的上下文，提供更为智能的交互体验。
- **人类授权**：在敏感、重要的请求中，如何判断这个请求是人类的手动授权，还是智能体自主发起的请求？我们既要能够让智能体代表人类访问互联网，又要能够限制智能体的权限。
- **隐私保护**：如何防止智能体在交互过程中泄漏用户的隐私信息？

我们介绍智能体通信协议 Agent Network Protocol (ANP)在这三个问题上的思考与设计。

## 为什么智能体身份至关重要

自互联网诞生以来，身份认证一直是数字世界的核心问题。从最初的用户名密码，到后来的双因素认证、生物识别，身份验证技术不断演进。而今，随着智能体时代的到来，身份认证面临新的挑战。

智能体不同于传统软件，它们具有自主性、学习能力和决策能力。在智能体互联网中，智能体需要：
智能体不同于传统软件，它们具有自主性、学习能力和决策能力。在智能体互联网中，智能体需要：

- **作为数字公民**：拥有自己的身份，能够被其他智能体和系统识别和信任
- **代表用户行事**：获得适当的授权，代表用户执行各种任务和交易
- **跨平台协作**：与不同平台的智能体和服务无缝交互，形成协作网络
- **保护用户隐私**：在代表用户行动的同时，保护用户的隐私和安全

正如我们在《智能体互联网有什么不同》中所讨论的，要释放AI的能力，需要让AI能够获得完整的上下文信息，能够调用互联网上的所有工具，能够用它最擅长的方式与互联网交互，能够与其他AI高效协作。而这一切的前提，就是一个强大而灵活的智能体身份系统。

## 关键问题一：互联互通—打破身份孤岛

这是智能体身份最关键，也是最难解决的问题。

在当前的互联网环境中，身份系统大多是平台孤岛。你的微信账号在钉钉中无法使用，你的支付宝账号也无法直接在京东上购物。

这种身份碎片化在智能体时代将成为严重阻碍，因为智能体需要在各种服务之间自由移动，以获取信息和执行任务。

如果一个智能体要调用另一个智能体的服务，但它们分属不同平台，使用不同的身份系统，那么协作将变得极其复杂，可能需要用户手动介入多次，这显然与智能体减轻用户负担的初衷相违背。

### 现有解决方案的分析

在寻找解决方案的过程中，我们对比研究了互联网现有的多种身份认证技术：

- **OpenID Connect**：虽然广泛用于单点登录，但其中心化特性和复杂的流程不适合智能体之间的高效交互，从根本上讲，OpenID Connect也并非未来解决身份的互联互通而设计。
- **API Keys**：广泛用于API对接，简单直接但安全性受限，且依然需要用户手动注册和配置，注册和配置过程会降低智能体交互的效率。
- **区块链身份解决方案**：去中心化程度高，但可扩展性和性能存在挑战。按照当前的技术，支持数十亿人用户使用是有很大的挑战的。
- **Email协议**：简单且去中心化，而且这个去中心化和我们理想中的去中心化是一致。email协议专为电子邮件业务设计，底层没有使用HTTP，无法复用现有成熟的web基础设施。
- **Nostr和AT Protocols**：新兴的去中心化协议，但尚未广泛采用。AT Protocols是我非常看好的协议，身份认证也使用W3C did，而且基于这个协议的应用Bluesky，很可能就是未来微信的样子。
- **W3C DID**：W3C去中心化标识符(DID)规范，设计的目的就是为了解决身份中心化带来的各种问题，并且在2022年发布为推荐标准。但是互联网并未广泛使用。

### W3C DID是智能体身份最佳方案

W3C DID在发布后，一直没有广泛的应用。但是分析完所有的技术后，我们坚定的认为，W3C DID绝对是最适合智能的身份技术，再设计一个新的也很难比它做的更好。

有几点原因：
- W3C DID天生为去中心化和身份的互操作性而设计，非常完美的契合了智能体需要互联互通的需求。
- W3C DID的实现更加的灵活，它现阶段并不强求底层去中心化实现，比如，并不要求一定要用区块链实现DID。这给开发者更多的选择。
- 我们基于did:web方法设计了一个面向智能体的新方法实现，这个方法既能够实现去中心化，又能够重复的复用现有成熟的web基础设施，能够支持十亿百亿智能体使用。

W3C DID原有的规范加上我们的方法实现，我认为是当前最适合智能体的身份方案。

方案详细的介绍：[did:wba-基于web的去中心化身份标识符](/blogs/cn/did:wba-基于web的去中心化身份标识符.md

## 关键问题二：人类授权—确保关键操作的安全性

随着智能体越来越多地代表人类执行任务，一个关键问题越来越重要：智能体对外发出的请求，是否获得人类手动授权。

例如，一个智能体可以代替用户自主浏览酒店信息，但当它要进行实际预订和支付时，应当获得人类的手动授权。

缺乏这种区分机制可能导致两种风险：一是智能体过度谨慎，频繁打断用户确认简单操作；二是智能体过度自主，在关键决策上缺乏必要的人类监督，从而给人类带来资产损失。

### did:wba的人类授权机制

ANP协议通过did:wba规范提出了一个优雅的解决方案：人类授权与智能体自动授权的明确区分机制。

在did:wba文档中，我们引入了`humanAuthorization`字段，用于存储专门用于人类授权的公钥信息：

```json
"humanAuthorization": [
  "did:wba:example.com%3A8800:user:alice#WjKgJV7VRw3hmgU6--4v15c0Aewbcvat1BsRFTIqa5Q",
  {
    "id": "did:wba:example.com%3A8800:user:alice#key-3",
    "type": "Ed25519VerificationKey2020",
    "controller": "did:wba:example.com%3A8800:user:alice",
    "publicKeyMultibase": "z9XK2BVwLNv6gmMNbm4uVAjZpfkcJDwDwnZn6z3wweKLo"
  }
]
```

这一机制的工作原理是：

1. **默认授权**：对于不敏感的操作，智能体可以使用普通验证方法进行签名和授权，无需人类干预。
2. **人类授权**：对于重要操作（如购买、支付、隐私数据访问），需要使用`humanAuthorization`中定义的密钥进行签名，这通常需要人类通过生物识别等方式显式、手动授权。

在智能体描述协议中，服务提供方可以明确指定哪些接口需要人类手动授权：

```json
{
  "@type": "ad:StructuredInterface",
  "protocol": "YAML",
  "humanAuthorization": true,
  "url": "https://agent-network-protocol.com/api/purchase-interface.yaml",
  "description": "A YAML file for interacting with the intelligent agent through purchase."
}
```

通过这种机制，我们实现了智能体自主性和安全性的平衡：智能体可以自由执行日常任务，同时关键操作依然受到严格控制，确保用户的资金安全和数据隐私。

智能体的开发人员需要对humanAuthorization对应的私钥进行安全的保管，同时进行权限隔离，比如，只有经过生物识别（指纹、人脸识别等）验证用户后，才能使用humanAuthorization进行签名。

## 问题三：隐私保护—防止行为追踪与画像

随着智能体在各种平台上代表用户活动，一个更微妙但同样重要的问题出现了：如何防止用户的行为被跟踪和分析？如果一个用户使用同一个身份标识符访问不同服务，这些服务可能会合作构建该用户的详细行为画像，侵犯用户隐私。

### did:wba的多身份策略

为解决这一问题，ANP协议在did:wba规范中提出了多身份策略：

1. **主DID**：用户拥有一个主DID，通常保持相对稳定，用于维护社交关系等需要持久身份的场景。
2. **子DID**：用户同时拥有多个从属于主DID的子DID，用于不同的交互场景，如购物、餐饮预订、内容订阅等。
3. **周期性更新**：子DID可以定期更新，旧的DID可以停用，申请新的DID，增加追踪难度。

这种多层次身份架构使用户能够在不同场景下使用不同身份，防止跨平台行为关联，同时保持各DID之间的从属关系，便于用户管理。

最重要的是，这一设计赋予了用户对自己数字身份的控制权，使其能够决定何时、何地以及如何展示自己的身份信息，真正实现"用户数据由用户掌控"的愿景。



## 版权声明  
Copyright (c) 2024 GaoWei Chang  
本文件依据 [MIT 许可证](./LICENSE) 发布，您可以自由使用和修改，但必须保留本版权声明。  



