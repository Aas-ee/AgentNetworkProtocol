# 当我们设计一个协议的时候，我们在设计什么

## 协议是世界观的表达

当我们在设计一个协议的时候，我们在设计什么？这个问题可以从多个层面进行深入探讨。

协议的设计不仅仅是技术细节的堆砌，更是对整个世界运行规律的认知与理解，以及对未来发展趋势的一种判断。协议描述的是一个世界模型，这个模型描述了世界运行的规律，以及未来发展的方向。它需要设计这个世界模型中有哪些角色、不同的角色之间如何进行交互。

历史上的每一个成功协议，都体现了设计者对当时技术环境和未来趋势的准确把握。比如HTTP协议的设计反映了万维网创始人蒂姆·伯纳斯-李对信息共享和超文本系统的理解，它定义了客户端和服务器的角色，以及它们之间如何通过简单的请求-响应模式进行交互。正是这种简单而灵活的设计，使HTTP成为了互联网的基础协议之一。

## 智能体协议背后的世界观差异

在智能体通信协议领域，我们可以看到不同协议背后折射出的世界观差异。以当前较为知名的三种协议为例：MCP、ANP和Agora协议。

### MCP：模型中心的世界观

MCP (Model Context Protocol) 的世界观是以模型为中心，整个互联网就是它的上下文。MCP是典型的客户端-服务端架构，客户端使用MCP协议连接到MCP服务器，然后访问服务器的各种信息和工具能力。

这种设计理念非常适合当前的互联网环境，它让AI模型能够方便地接入现有互联网资源，丰富Chatbot产品的能力。从某种程度上说，MCP将模型视为中心，将整个互联网视为模型的扩展。

MCP使用了基于OAuth的身份认证方案，这是互联网上广泛应用的标准，使得模型能够访问用户在现有互联网应用上的资源。在信息组织上，MCP使用JSON-RPC来读取/操作服务器的资源与工具能力，本质上可以理解为一种特殊的API调用。

（备注：这段可以讲下最近AI编程工具比如cursor对MCP的支持，你可以查找资料）

### ANP：智能体网络的去中心化视角

ANP (Agent Network Protocol) 的世界观则完全不同。它是去中心化的，智能体互相平等连接。ANP是典型的P2P（点对点）架构，任意一个智能体都可以使用ANP连接到另外一个智能体，不存在中心化的服务节点。

ANP的身份认证基于W3C DID标准，重点解决智能体之间的跨平台互操作性问题，让所有智能体都能互联互通。在信息组织上，ANP以语义网的Linked-Data技术为核心，目的是构建一个便于AI访问、便于AI理解的数据网络。

这种设计理念更适合下一阶段智能体互联网的发展，它预见了一个由无数智能体组成的网络，每个智能体都具有同等地位，可以自由连接和交互。

### Agora：自然语言交互的未来展望

Agora协议则代表了更远的一种可能性，它认为未来智能体之间可以直接使用自然语言进行交互。这种想法在未来是可能实现的，因为随着AI技术的发展，智能体之间甚至可能进化出自己的语言形式，而自然语言可能只是一个过渡阶段。

这三种协议代表了智能体发展的三个不同阶段：MCP解决当下的问题，ANP解决下一步的问题，而Agora则在探索更远未来的可能性。它们在背后反映了每个设计者对当下的判断，对未来的一个预测，对整个世界运行规律的认知，以及他们背后的设计理念。

## 协议成功的决定因素

哪个协议最终能够胜出？生态、技术、能力都非常重要，但最根本的是什么？是协议是否符合未来行业的发展方向，这才是最重要的一点。也就是说，协议设计者在背后对整个世界模型的认知，以及对未来发展的一个判断，决定了协议未来是否有足够大的生命力。

推动互联网演进的最本质问题，是如何最大限度地释放新技术的能力。PC互联网时期，Web技术释放了开放互联网的访问能力；移动互联网时期，APP释放了移动设备的全部潜力。在当下以及未来10年，新技术无疑是以生成式人工智能、大语言模型、智能体为代表的AI技术。如何释放AI的能力，决定了未来互联网的演进方向。

例如，德国电信基于传统互联网设计的协议，与我们基于智能体设计的协议，哪个更有生命力？如果未来物联网上也能够运行智能体，而且智能体要和物联网设备做非常深入的沟通，那么前者的路线可能会更有生命力。

## 历史经验：SIP与H.323的案例

历史上的案例可以给我们提供借鉴。以SIP和H.323为例，SIP是基于纯文本的协议，在最早期，它的处理效率并不高。而H.323是二进制协议，非常紧凑，非常省带宽。但最终胜出的是SIP而不是H.323，为什么会这样？

答案在于技术发展的大趋势：随着计算能力的不断提升，算力越来越强，字符串处理的效率已经不再是根本问题。SIP基于文本的特性使其更加灵活、可扩展，更易于调试和实现，这些优势在长期来看远比短期的效率优势更加重要。

这个案例告诉我们，协议设计不应该过于关注当前技术条件下的优化，而应该着眼于长期的技术发展趋势和易用性、灵活性等因素。

## 协议的未来：向自然语言演进？

展望未来，协议有没有可能全部进化为自然语言？这个是有很大概率会发生的，特别是控制层的协议。在传输媒体层的协议上，它可能还是保持现在的二进制形式，因为效率和精确性的考虑。但控制协议完全有可能进化为自然语言形式，而且我认为这个大概率会发生。

随着大语言模型能力的不断提升，自然语言作为人机交互和机器间交互的媒介将变得越来越自然。控制层协议使用自然语言有几个优势：

1. **降低开发门槛**：使用自然语言描述需求和功能，可以让更多非技术人员参与到协议设计和使用中。
2. **提高灵活性**：自然语言比严格格式的协议更加灵活，可以处理更多歧义和不确定性。
3. **无缝集成**：随着AI的普及，自然语言将成为人与AI、AI与AI之间最自然的交流方式。

## 区块链协议：另一种世界观的体现

最后，值得一提的是比特币协议，它是另一个反映不同世界观的重要例子。比特币协议体现了区块链、Web3背后的去中心化、不可篡改、共识机制等核心思想。

比特币协议设计了一个没有中心节点、基于数学和加密学原理的价值传输系统，它不依赖于任何中央机构或信任第三方。这种设计背后反映的是对传统金融体系的不信任，以及对一个更加开放、透明、无需信任的经济系统的向往。

## 智能体互联网的愿景

未来的智能体互联网会呈现什么样的特性？基于我们的研究，智能体互联网可能具有以下特点：

1. **智能体渗透到互联网的各个角落**：一个人或组织可能有多个智能体为其服务。
2. **所有智能体之间都可以互联互通**：这是释放AI能力的必要条件。
3. **个人助手成为互联网的新入口**：智能体之间的连接远大于人与智能体之间的连接。
4. **网络更加扁平化**：智能体之间可以直接连接，无需三方平台的中介。

在这样的背景下，什么样的协议能够胜出？我们认为，最终胜出的协议必须能够支持智能体之间的无缝连接与协作，必须足够灵活以适应未来AI技术的飞速发展，同时还要具备可扩展性和安全性。

## 结语

协议设计是对世界的一种理解和塑造。当我们设计一个协议时，我们不仅仅是在设计技术细节，更是在描绘我们心目中的世界运行模式，以及我们对未来的期望和预测。

成功的协议不仅仅取决于其技术优势，更取决于它是否符合技术发展的大趋势，是否能够最大化地释放新技术的能力。在智能体时代，我们需要的协议应该能够支持智能体之间的自由连接、高效协作，同时为人类创造更多价值。

无论是MCP、ANP还是其他协议，它们都在尝试描绘未来智能体互联网的蓝图。只有那些真正理解技术发展趋势，并能够适应未来需求的协议，才能够在历史长河中留下自己的印记。